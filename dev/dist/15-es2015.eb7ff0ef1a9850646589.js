(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"q+WM":function(l,n,t){"use strict";t.r(n);var e=t("8Y7J"),u=t("XNiG"),s=t("1G5W"),i=t("K7hc");class a{constructor(l,n,t,e){this._documentService=l,this._searchService=n,this._router=t,this.modalService=e,this.ListStatusDocument=[],this.p=1,this.showMessage=!1,this.showData=!1,this.baseDocumentBodies=[],this.documentBodies=[],this.isActivedAll=!1,this.isActivedCompleted=!1,this.isActivedPending=!1,this.documentDatas=[],this.ngUnsubscribe=new u.a}onClickAll(){this.isActivedAll=!0,this.isActivedCompleted=!1,this.isActivedPending=!1,this.filterData(null)}onClickCompleted(){this.isActivedAll=!1,this.isActivedCompleted=!0,this.isActivedPending=!1,this.filterData(Array.of("APPROVE","REJECT"))}onClickPending(){this.isActivedAll=!1,this.isActivedCompleted=!1,this.isActivedPending=!0,this.filterData(Array.of("PENDING","REVISION"))}ngOnDestroy(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.openModal(!1)}ngOnInit(){this.isActivedAll=!0,this.openModal(!0),this._router.url==`${i.a.basePath}/nasabah/revision`?(this.superType="nasabah",this.getHeaderDocument(this.superType)):(this.superType="internal",this.getHeaderDocument(this.superType))}getHeaderDocument(l){let n;n="nasabah"==l?JSON.parse(sessionStorage.getItem("headerstatus-nasabah")):JSON.parse(sessionStorage.getItem("headerstatus-internal")),n?(this.documentHeaders=n.output,this.buildHeader(this.documentHeaders),this.searchDocument(this.documentHeaders)):(this.openModal(!0),this._searchService.getSearchHeaderDock("status",l).pipe(Object(s.a)(this.ngUnsubscribe)).subscribe(n=>{"nasabah"==l?sessionStorage.setItem("headerstatus-nasabah",JSON.stringify(n)):sessionStorage.setItem("headerstatus-internal",JSON.stringify(n)),this.documentHeaders=n.output,this.buildHeader(this.documentHeaders),this.searchDocument(this.documentHeaders),this.openModal(!1)},l=>console.error(l)))}buildHeader(l){let n=l.map(l=>l.label_name);this.documentHeadersValue=Array.from(new Set(n)),this.statusHeaderIndex=this.documentHeadersValue.findIndex(l=>"status"==l.toLocaleLowerCase())+1}searchDocument(l){let n=l.map(l=>l.object_type),t=Array.from(new Set(n)),e=0;t.forEach(l=>{this._documentService.getStatusDocument(l).pipe(Object(s.a)(this.ngUnsubscribe)).subscribe(n=>{e++;for(let l=0;l<n.output.length;l++)this.documentDatas.push(n.output[l]);n.output.forEach(l=>this.ListStatusDocument.push(l)),this.mergeDocumentResult(l,n.output),e==t.length&&this.onClickAll(),this.openModal(!1)})})}filterData(l){let n=this.documentHeadersValue.indexOf("Status");if(this.indexStatus=n+1,null==l)return this.documentBodies=this.baseDocumentBodies,void this.documentBodies.sort((l,t)=>t[n+1].localeCompare(l[n+1]));this.documentBodies=this.baseDocumentBodies.filter(t=>{let e=!1;return l.forEach(l=>{e||(e=t[n+1].toLocaleLowerCase().includes(l.toLocaleLowerCase()))}),e}),this.documentBodies.sort((l,t)=>t[n+1].localeCompare(l[n+1]))}mergeDocumentResult(l,n){n.forEach(n=>{let t=[],e=this.documentHeaders.filter(n=>n.object_type==l);t.push(n.r_object_id),e.forEach(l=>{let e;var u;e="date"==l.header_type?null!=n[l.attr_name]?(u=n[l.attr_name].toString().split("T")[0])?u.replace(/(\d{4})-(\d{1,2})-(\d{1,2})/,(l,n,t,e)=>e+"-"+t+"-"+n):"":"-":null!=n[l.attr_name]?n[l.attr_name]:"-",t.push(e)}),this.baseDocumentBodies.push(t),this.documentBodies.push(t)}),this.dataCheck()}dataCheck(){0!=this.ListStatusDocument.length?(this.showMessage=!1,this.showCount()):this.showMessage=!0}clearDataAndSearch(l){this.ListStatusDocument=[],this.documentHeaders=[],this.documentHeadersValue=[],this.baseDocumentBodies=[],this.documentBodies=[],this.documentDatas=[],this.superType=l,this.getHeaderDocument(l),this.isActivedAll=!0,this.isActivedCompleted=!1,this.isActivedPending=!1}sendData(l){let n;for(let t=0;t<this.documentDatas.length;t++)if(this.documentDatas[t].r_object_id==l[0]){n=this.documentDatas[t],"REVISION_INSERT"!=n.apprisal_status&&"REVISION_UPDATE"!=n.apprisal_status||(this._router.url==`${i.a.basePath}/nasabah/revision`?(this._router.navigateByUrl(`${i.a.basePath}/nasabah/revision-document`,{state:{data:n}}),sessionStorage.setItem("current-document-revision",JSON.stringify(n)),sessionStorage.setItem("super_type",this.superType)):(this._router.navigateByUrl(`${i.a.basePath}/internal/revision-document`,{state:{data:n}}),sessionStorage.setItem("current-document-revision",JSON.stringify(n)),sessionStorage.setItem("super_type",this.superType)));break}}showCount(){this.all=this.countRevision(null),this.complete=this.countRevision(Array.of("APPROVE","REJECT")),this.pending=this.countRevision(Array.of("PENDING","REVISION"))}countRevision(l){if(null==l)return this.baseDocumentBodies.length;let n=this.documentHeadersValue.indexOf("Status");return this.baseDocumentBodies.filter(t=>{let e=!1;return l.forEach(l=>{e||(e=t[n+1].toLocaleLowerCase().includes(l.toLocaleLowerCase()))}),e}).length}openModal(l){l?this.modalService.open(this.loader,{backdrop:"static",centered:!0,keyboard:!1}).result.then(l=>{},l=>{}):this.modalService.dismissAll()}}class o{}var r=t("pMnS"),c=t("9AJC"),b=t("SVse"),d=t("xkgV"),h=t("abRS"),p=t("9F3s"),m=t("dAmK"),g=t("iInd"),f=t("G0yt"),v=e.xb({encapsulation:0,styles:[[""]],data:{}});function S(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(l()(),e.Sb(1,null,["",""]))],null,(function(l,n){l(n,1,0,n.context.$implicit)}))}function y(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Sb(-1,null,[" Diterima "]))],null,null)}function I(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Sb(-1,null,[" Ditolak "]))],null,null)}function J(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Sb(-1,null,[" Revisi "]))],null,null)}function D(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Sb(-1,null,[" Menunggu Persetujuan "]))],null,null)}function A(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,0,"img",[["class","ml-2"],["src","assets/img/icon/status-revisi.png"]],null,null,null,null,null))],null,null)}function x(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,10,"span",[],null,null,null,null,null)),(l()(),e.ob(16777216,null,null,1,null,y)),e.yb(2,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(l()(),e.ob(16777216,null,null,1,null,I)),e.yb(4,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(l()(),e.ob(16777216,null,null,1,null,J)),e.yb(6,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(l()(),e.ob(16777216,null,null,1,null,D)),e.yb(8,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(l()(),e.ob(16777216,null,null,1,null,A)),e.yb(10,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null)],(function(l,n){l(n,2,0,"APPROVED"==n.parent.context.$implicit),l(n,4,0,"REJECT"==n.parent.context.$implicit),l(n,6,0,"REVISION_UPDATE"==n.parent.context.$implicit||"REVISION_INSERT"==n.parent.context.$implicit),l(n,8,0,"PENDING_INSERT"==n.parent.context.$implicit||"PENDING_DELETE"==n.parent.context.$implicit||"PENDING_UPDATE"==n.parent.context.$implicit),l(n,10,0,"REVISION_UPDATE"==n.parent.context.$implicit||"REVISION_INSERT"==n.parent.context.$implicit)}),null)}function C(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(l()(),e.Sb(1,null,[" "," "]))],null,(function(l,n){l(n,1,0,n.parent.context.$implicit)}))}function E(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,4,"td",[["style","text-align: left"]],[[8,"hidden",0]],null,null,null,null)),(l()(),e.ob(16777216,null,null,1,null,x)),e.yb(2,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(l()(),e.ob(16777216,null,null,1,null,C)),e.yb(4,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null)],(function(l,n){var t=n.component;l(n,2,0,n.context.index==t.statusHeaderIndex),l(n,4,0,n.context.index!=t.statusHeaderIndex)}),(function(l,n){l(n,0,0,0==n.context.index)}))}function R(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,5,"tr",[],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.sendData(l.context.$implicit)&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(2,278528,null,0,b.l,[b.F],{ngClass:[0,"ngClass"]},null),e.Nb(3,{"dea-cursorPointer":0}),(l()(),e.ob(16777216,null,null,1,null,E)),e.yb(5,278528,null,0,b.m,[e.U,e.R,e.v],{ngForOf:[0,"ngForOf"]},null)],(function(l,n){var t=n.component,e=l(n,3,0,"REVISION_UPDATE"==n.context.$implicit[t.indexStatus]||"REVISION_INSERT"==n.context.$implicit[t.indexStatus]);l(n,2,0,e),l(n,5,0,n.context.$implicit)}),null)}function P(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,2,"div",[["class","mt-4"]],null,null,null,null,null)),(l()(),e.zb(1,0,null,null,1,"p",[["class","text-center"]],null,null,null,null,null)),(l()(),e.Sb(-1,null,["Tidak ada dokumen baru"]))],null,null)}function N(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"div",[["class","modal-body dea-modal-content dea-loaderBG"]],null,null,null,null,null)),(l()(),e.zb(1,0,null,null,0,"img",[["src","assets/img/dea_loading.gif"]],null,null,null,null,null))],null,null)}function U(l){return e.Ub(0,[e.Qb(402653184,1,{loader:0}),(l()(),e.zb(1,0,null,null,38,"div",[["class","app-content overflow-auto"]],null,null,null,null,null)),(l()(),e.zb(2,0,null,null,37,"div",[["class","dea-container pt-3"]],null,null,null,null,null)),(l()(),e.zb(3,0,null,null,20,"div",[["class","row mt-2 px-3"]],null,null,null,null,null)),(l()(),e.zb(4,0,null,null,3,"div",[["class"," row col-6"]],null,null,null,null,null)),(l()(),e.zb(5,0,null,null,2,"h5",[["class","mt-2"]],null,null,null,null,null)),(l()(),e.zb(6,0,null,null,1,"b",[],null,null,null,null,null)),(l()(),e.Sb(-1,null,["Status Dokumen"])),(l()(),e.zb(8,0,null,null,15,"div",[["class","col d-flex justify-content-end px-0"]],null,null,null,null,null)),(l()(),e.zb(9,0,null,null,4,"button",[["class","px-4 btn btn-outline-primary dea-filterBtn mr-2"],["type","button"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onClickAll()&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(11,278528,null,0,b.l,[b.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Nb(12,{"dea-activedBtn":0}),(l()(),e.Sb(-1,null,["All"])),(l()(),e.zb(14,0,null,null,4,"button",[["class","px-4 btn btn-outline-primary dea-filterBtn mr-2"],["type","button"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onClickCompleted()&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(16,278528,null,0,b.l,[b.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Nb(17,{"dea-activedBtn":0}),(l()(),e.Sb(-1,null,["Completed"])),(l()(),e.zb(19,0,null,null,4,"button",[["class","px-4 btn btn-outline-primary dea-filterBtn"],["type","button"]],null,[[null,"click"]],(function(l,n,t){var e=!0;return"click"===n&&(e=!1!==l.component.onClickPending()&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(21,278528,null,0,b.l,[b.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Nb(22,{"dea-activedBtn":0}),(l()(),e.Sb(23,null,["Pending (",")"])),(l()(),e.zb(24,0,null,null,15,"div",[],null,null,null,null,null)),(l()(),e.zb(25,0,null,null,9,"table",[["class","table table-hover dea-table mt-2"]],null,null,null,null,null)),(l()(),e.zb(26,0,null,null,3,"thead",[],null,null,null,null,null)),(l()(),e.zb(27,0,null,null,2,"tr",[],null,null,null,null,null)),(l()(),e.ob(16777216,null,null,1,null,S)),e.yb(29,278528,null,0,b.m,[e.U,e.R,e.v],{ngForOf:[0,"ngForOf"]},null),(l()(),e.zb(30,0,null,null,4,"tbody",[],null,null,null,null,null)),(l()(),e.ob(16777216,null,null,3,null,R)),e.yb(32,278528,null,0,b.m,[e.U,e.R,e.v],{ngForOf:[0,"ngForOf"]},null),e.Nb(33,{itemsPerPage:0,currentPage:1}),e.Mb(0,d.b,[d.e]),(l()(),e.ob(16777216,null,null,1,null,P)),e.yb(36,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(l()(),e.zb(37,0,null,null,2,"div",[["class","dea-pagination"]],null,null,null,null,null)),(l()(),e.zb(38,0,null,null,1,"pagination-controls",[],null,[[null,"pageChange"]],(function(l,n,t){var e=!0;return"pageChange"===n&&(e=!1!==(l.component.p=t)&&e),e}),h.b,h.a)),e.yb(39,49152,null,0,d.c,[],null,{pageChange:"pageChange"}),(l()(),e.ob(0,[[1,2],["loading",2]],null,0,null,N))],(function(l,n){var t=n.component,u=l(n,12,0,1==t.isActivedAll);l(n,11,0,"px-4 btn btn-outline-primary dea-filterBtn mr-2",u);var s=l(n,17,0,1==t.isActivedCompleted);l(n,16,0,"px-4 btn btn-outline-primary dea-filterBtn mr-2",s);var i=l(n,22,0,1==t.isActivedPending);l(n,21,0,"px-4 btn btn-outline-primary dea-filterBtn",i),l(n,29,0,t.documentHeadersValue);var a=e.Tb(n,32,0,e.Lb(n,34).transform(t.documentBodies,l(n,33,0,10,t.p)));l(n,32,0,a),l(n,36,0,t.showMessage)}),(function(l,n){l(n,23,0,n.component.pending)}))}function _(l){return e.Ub(0,[(l()(),e.zb(0,0,null,null,1,"app-revision",[],null,null,null,U,v)),e.yb(1,245760,null,0,a,[p.a,m.a,g.k,f.y],null,null)],(function(l,n){l(n,1,0)}),null)}var k=e.vb("app-revision",a,_,{},{},[]),z=t("s7LF"),O=t("xxOi");t.d(n,"RevisionModuleNgFactory",(function(){return B}));var B=e.wb(o,[],(function(l){return e.Ib([e.Jb(512,e.l,e.hb,[[8,[r.a,c.a,c.b,c.f,c.g,c.c,c.d,c.e,k]],[3,e.l],e.B]),e.Jb(4608,b.p,b.o,[e.x,[2,b.K]]),e.Jb(4608,z.z,z.z,[]),e.Jb(4608,z.e,z.e,[]),e.Jb(4608,f.y,f.y,[e.l,e.t,f.nb,f.z]),e.Jb(4608,d.e,d.e,[]),e.Jb(1073742336,b.b,b.b,[]),e.Jb(1073742336,g.o,g.o,[[2,g.t],[2,g.k]]),e.Jb(1073742336,z.y,z.y,[]),e.Jb(1073742336,z.j,z.j,[]),e.Jb(1073742336,z.v,z.v,[]),e.Jb(1073742336,f.d,f.d,[]),e.Jb(1073742336,f.g,f.g,[]),e.Jb(1073742336,f.h,f.h,[]),e.Jb(1073742336,f.l,f.l,[]),e.Jb(1073742336,f.m,f.m,[]),e.Jb(1073742336,f.t,f.t,[]),e.Jb(1073742336,f.u,f.u,[]),e.Jb(1073742336,f.A,f.A,[]),e.Jb(1073742336,f.C,f.C,[]),e.Jb(1073742336,f.G,f.G,[]),e.Jb(1073742336,f.J,f.J,[]),e.Jb(1073742336,f.M,f.M,[]),e.Jb(1073742336,f.P,f.P,[]),e.Jb(1073742336,f.S,f.S,[]),e.Jb(1073742336,f.X,f.X,[]),e.Jb(1073742336,f.ab,f.ab,[]),e.Jb(1073742336,f.bb,f.bb,[]),e.Jb(1073742336,f.cb,f.cb,[]),e.Jb(1073742336,f.B,f.B,[]),e.Jb(1073742336,O.a,O.a,[]),e.Jb(1073742336,d.a,d.a,[]),e.Jb(1073742336,o,o,[]),e.Jb(1024,g.i,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);