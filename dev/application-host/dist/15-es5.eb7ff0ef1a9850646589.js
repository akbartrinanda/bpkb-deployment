function _classCallCheck(n,l){if(!(n instanceof l))throw new TypeError("Cannot call a class as a function")}function _defineProperties(n,l){for(var t=0;t<l.length;t++){var e=l[t];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function _createClass(n,l,t){return l&&_defineProperties(n.prototype,l),t&&_defineProperties(n,t),n}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"q+WM":function(n,l,t){"use strict";t.r(l);var e=t("8Y7J"),u=t("XNiG"),i=t("1G5W"),s=t("K7hc"),a=function(){function n(l,t,e,i){_classCallCheck(this,n),this._documentService=l,this._searchService=t,this._router=e,this.modalService=i,this.ListStatusDocument=[],this.p=1,this.showMessage=!1,this.showData=!1,this.baseDocumentBodies=[],this.documentBodies=[],this.isActivedAll=!1,this.isActivedCompleted=!1,this.isActivedPending=!1,this.documentDatas=[],this.ngUnsubscribe=new u.a}return _createClass(n,[{key:"onClickAll",value:function(){this.isActivedAll=!0,this.isActivedCompleted=!1,this.isActivedPending=!1,this.filterData(null)}},{key:"onClickCompleted",value:function(){this.isActivedAll=!1,this.isActivedCompleted=!0,this.isActivedPending=!1,this.filterData(Array.of("APPROVE","REJECT"))}},{key:"onClickPending",value:function(){this.isActivedAll=!1,this.isActivedCompleted=!1,this.isActivedPending=!0,this.filterData(Array.of("PENDING","REVISION"))}},{key:"ngOnDestroy",value:function(){this.ngUnsubscribe.next(),this.ngUnsubscribe.complete(),this.openModal(!1)}},{key:"ngOnInit",value:function(){this.isActivedAll=!0,this.openModal(!0),this._router.url=="".concat(s.a.basePath,"/nasabah/revision")?(this.superType="nasabah",this.getHeaderDocument(this.superType)):(this.superType="internal",this.getHeaderDocument(this.superType))}},{key:"getHeaderDocument",value:function(n){var l,t=this;(l="nasabah"==n?JSON.parse(sessionStorage.getItem("headerstatus-nasabah")):JSON.parse(sessionStorage.getItem("headerstatus-internal")))?(this.documentHeaders=l.output,this.buildHeader(this.documentHeaders),this.searchDocument(this.documentHeaders)):(this.openModal(!0),this._searchService.getSearchHeaderDock("status",n).pipe(Object(i.a)(this.ngUnsubscribe)).subscribe((function(l){"nasabah"==n?sessionStorage.setItem("headerstatus-nasabah",JSON.stringify(l)):sessionStorage.setItem("headerstatus-internal",JSON.stringify(l)),t.documentHeaders=l.output,t.buildHeader(t.documentHeaders),t.searchDocument(t.documentHeaders),t.openModal(!1)}),(function(n){return console.error(n)})))}},{key:"buildHeader",value:function(n){var l=n.map((function(n){return n.label_name}));this.documentHeadersValue=Array.from(new Set(l)),this.statusHeaderIndex=this.documentHeadersValue.findIndex((function(n){return"status"==n.toLocaleLowerCase()}))+1}},{key:"searchDocument",value:function(n){var l=this,t=n.map((function(n){return n.object_type})),e=Array.from(new Set(t)),u=0;e.forEach((function(n){l._documentService.getStatusDocument(n).pipe(Object(i.a)(l.ngUnsubscribe)).subscribe((function(t){u++;for(var i=0;i<t.output.length;i++)l.documentDatas.push(t.output[i]);t.output.forEach((function(n){return l.ListStatusDocument.push(n)})),l.mergeDocumentResult(n,t.output),u==e.length&&l.onClickAll(),l.openModal(!1)}))}))}},{key:"filterData",value:function(n){var l=this.documentHeadersValue.indexOf("Status");if(this.indexStatus=l+1,null==n)return this.documentBodies=this.baseDocumentBodies,void this.documentBodies.sort((function(n,t){return t[l+1].localeCompare(n[l+1])}));this.documentBodies=this.baseDocumentBodies.filter((function(t){var e=!1;return n.forEach((function(n){e||(e=t[l+1].toLocaleLowerCase().includes(n.toLocaleLowerCase()))})),e})),this.documentBodies.sort((function(n,t){return t[l+1].localeCompare(n[l+1])}))}},{key:"mergeDocumentResult",value:function(n,l){var t=this;l.forEach((function(l){var e=[],u=t.documentHeaders.filter((function(l){return l.object_type==n}));e.push(l.r_object_id),u.forEach((function(n){var t,u;t="date"==n.header_type?null!=l[n.attr_name]?(u=l[n.attr_name].toString().split("T")[0])?u.replace(/(\d{4})-(\d{1,2})-(\d{1,2})/,(function(n,l,t,e){return e+"-"+t+"-"+l})):"":"-":null!=l[n.attr_name]?l[n.attr_name]:"-",e.push(t)})),t.baseDocumentBodies.push(e),t.documentBodies.push(e)})),this.dataCheck()}},{key:"dataCheck",value:function(){0!=this.ListStatusDocument.length?(this.showMessage=!1,this.showCount()):this.showMessage=!0}},{key:"clearDataAndSearch",value:function(n){this.ListStatusDocument=[],this.documentHeaders=[],this.documentHeadersValue=[],this.baseDocumentBodies=[],this.documentBodies=[],this.documentDatas=[],this.superType=n,this.getHeaderDocument(n),this.isActivedAll=!0,this.isActivedCompleted=!1,this.isActivedPending=!1}},{key:"sendData",value:function(n){for(var l,t=0;t<this.documentDatas.length;t++)if(this.documentDatas[t].r_object_id==n[0]){"REVISION_INSERT"!=(l=this.documentDatas[t]).apprisal_status&&"REVISION_UPDATE"!=l.apprisal_status||(this._router.url=="".concat(s.a.basePath,"/nasabah/revision")?(this._router.navigateByUrl("".concat(s.a.basePath,"/nasabah/revision-document"),{state:{data:l}}),sessionStorage.setItem("current-document-revision",JSON.stringify(l)),sessionStorage.setItem("super_type",this.superType)):(this._router.navigateByUrl("".concat(s.a.basePath,"/internal/revision-document"),{state:{data:l}}),sessionStorage.setItem("current-document-revision",JSON.stringify(l)),sessionStorage.setItem("super_type",this.superType)));break}}},{key:"showCount",value:function(){this.all=this.countRevision(null),this.complete=this.countRevision(Array.of("APPROVE","REJECT")),this.pending=this.countRevision(Array.of("PENDING","REVISION"))}},{key:"countRevision",value:function(n){if(null==n)return this.baseDocumentBodies.length;var l=this.documentHeadersValue.indexOf("Status");return this.baseDocumentBodies.filter((function(t){var e=!1;return n.forEach((function(n){e||(e=t[l+1].toLocaleLowerCase().includes(n.toLocaleLowerCase()))})),e})).length}},{key:"openModal",value:function(n){n?this.modalService.open(this.loader,{backdrop:"static",centered:!0,keyboard:!1}).result.then((function(n){}),(function(n){})):this.modalService.dismissAll()}}]),n}(),o=function n(){_classCallCheck(this,n)},r=t("pMnS"),c=t("9AJC"),b=t("SVse"),d=t("xkgV"),h=t("abRS"),p=t("9F3s"),m=t("dAmK"),f=t("iInd"),g=t("G0yt"),v=e.xb({encapsulation:0,styles:[[""]],data:{}});function y(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"th",[["scope","col"]],null,null,null,null,null)),(n()(),e.Sb(1,null,["",""]))],null,(function(n,l){n(l,1,0,l.context.$implicit)}))}function S(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Sb(-1,null,[" Diterima "]))],null,null)}function I(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Sb(-1,null,[" Ditolak "]))],null,null)}function k(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Sb(-1,null,[" Revisi "]))],null,null)}function C(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Sb(-1,null,[" Menunggu Persetujuan "]))],null,null)}function J(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,0,"img",[["class","ml-2"],["src","assets/img/icon/status-revisi.png"]],null,null,null,null,null))],null,null)}function D(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,10,"span",[],null,null,null,null,null)),(n()(),e.ob(16777216,null,null,1,null,S)),e.yb(2,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(n()(),e.ob(16777216,null,null,1,null,I)),e.yb(4,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(n()(),e.ob(16777216,null,null,1,null,k)),e.yb(6,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(n()(),e.ob(16777216,null,null,1,null,C)),e.yb(8,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(n()(),e.ob(16777216,null,null,1,null,J)),e.yb(10,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null)],(function(n,l){n(l,2,0,"APPROVED"==l.parent.context.$implicit),n(l,4,0,"REJECT"==l.parent.context.$implicit),n(l,6,0,"REVISION_UPDATE"==l.parent.context.$implicit||"REVISION_INSERT"==l.parent.context.$implicit),n(l,8,0,"PENDING_INSERT"==l.parent.context.$implicit||"PENDING_DELETE"==l.parent.context.$implicit||"PENDING_UPDATE"==l.parent.context.$implicit),n(l,10,0,"REVISION_UPDATE"==l.parent.context.$implicit||"REVISION_INSERT"==l.parent.context.$implicit)}),null)}function A(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"span",[],null,null,null,null,null)),(n()(),e.Sb(1,null,[" "," "]))],null,(function(n,l){n(l,1,0,l.parent.context.$implicit)}))}function x(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,4,"td",[["style","text-align: left"]],[[8,"hidden",0]],null,null,null,null)),(n()(),e.ob(16777216,null,null,1,null,D)),e.yb(2,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(n()(),e.ob(16777216,null,null,1,null,A)),e.yb(4,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null)],(function(n,l){var t=l.component;n(l,2,0,l.context.index==t.statusHeaderIndex),n(l,4,0,l.context.index!=t.statusHeaderIndex)}),(function(n,l){n(l,0,0,0==l.context.index)}))}function _(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,5,"tr",[],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.sendData(n.context.$implicit)&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(2,278528,null,0,b.l,[b.F],{ngClass:[0,"ngClass"]},null),e.Nb(3,{"dea-cursorPointer":0}),(n()(),e.ob(16777216,null,null,1,null,x)),e.yb(5,278528,null,0,b.m,[e.U,e.R,e.v],{ngForOf:[0,"ngForOf"]},null)],(function(n,l){var t=l.component,e=n(l,3,0,"REVISION_UPDATE"==l.context.$implicit[t.indexStatus]||"REVISION_INSERT"==l.context.$implicit[t.indexStatus]);n(l,2,0,e),n(l,5,0,l.context.$implicit)}),null)}function E(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,2,"div",[["class","mt-4"]],null,null,null,null,null)),(n()(),e.zb(1,0,null,null,1,"p",[["class","text-center"]],null,null,null,null,null)),(n()(),e.Sb(-1,null,["Tidak ada dokumen baru"]))],null,null)}function P(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"div",[["class","modal-body dea-modal-content dea-loaderBG"]],null,null,null,null,null)),(n()(),e.zb(1,0,null,null,0,"img",[["src","assets/img/dea_loading.gif"]],null,null,null,null,null))],null,null)}function R(n){return e.Ub(0,[e.Qb(402653184,1,{loader:0}),(n()(),e.zb(1,0,null,null,38,"div",[["class","app-content overflow-auto"]],null,null,null,null,null)),(n()(),e.zb(2,0,null,null,37,"div",[["class","dea-container pt-3"]],null,null,null,null,null)),(n()(),e.zb(3,0,null,null,20,"div",[["class","row mt-2 px-3"]],null,null,null,null,null)),(n()(),e.zb(4,0,null,null,3,"div",[["class"," row col-6"]],null,null,null,null,null)),(n()(),e.zb(5,0,null,null,2,"h5",[["class","mt-2"]],null,null,null,null,null)),(n()(),e.zb(6,0,null,null,1,"b",[],null,null,null,null,null)),(n()(),e.Sb(-1,null,["Status Dokumen"])),(n()(),e.zb(8,0,null,null,15,"div",[["class","col d-flex justify-content-end px-0"]],null,null,null,null,null)),(n()(),e.zb(9,0,null,null,4,"button",[["class","px-4 btn btn-outline-primary dea-filterBtn mr-2"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onClickAll()&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(11,278528,null,0,b.l,[b.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Nb(12,{"dea-activedBtn":0}),(n()(),e.Sb(-1,null,["All"])),(n()(),e.zb(14,0,null,null,4,"button",[["class","px-4 btn btn-outline-primary dea-filterBtn mr-2"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onClickCompleted()&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(16,278528,null,0,b.l,[b.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Nb(17,{"dea-activedBtn":0}),(n()(),e.Sb(-1,null,["Completed"])),(n()(),e.zb(19,0,null,null,4,"button",[["class","px-4 btn btn-outline-primary dea-filterBtn"],["type","button"]],null,[[null,"click"]],(function(n,l,t){var e=!0;return"click"===l&&(e=!1!==n.component.onClickPending()&&e),e}),null,null)),e.Pb(512,null,b.F,b.G,[e.v,e.w,e.n,e.J]),e.yb(21,278528,null,0,b.l,[b.F],{klass:[0,"klass"],ngClass:[1,"ngClass"]},null),e.Nb(22,{"dea-activedBtn":0}),(n()(),e.Sb(23,null,["Pending (",")"])),(n()(),e.zb(24,0,null,null,15,"div",[],null,null,null,null,null)),(n()(),e.zb(25,0,null,null,9,"table",[["class","table table-hover dea-table mt-2"]],null,null,null,null,null)),(n()(),e.zb(26,0,null,null,3,"thead",[],null,null,null,null,null)),(n()(),e.zb(27,0,null,null,2,"tr",[],null,null,null,null,null)),(n()(),e.ob(16777216,null,null,1,null,y)),e.yb(29,278528,null,0,b.m,[e.U,e.R,e.v],{ngForOf:[0,"ngForOf"]},null),(n()(),e.zb(30,0,null,null,4,"tbody",[],null,null,null,null,null)),(n()(),e.ob(16777216,null,null,3,null,_)),e.yb(32,278528,null,0,b.m,[e.U,e.R,e.v],{ngForOf:[0,"ngForOf"]},null),e.Nb(33,{itemsPerPage:0,currentPage:1}),e.Mb(0,d.b,[d.e]),(n()(),e.ob(16777216,null,null,1,null,E)),e.yb(36,16384,null,0,b.n,[e.U,e.R],{ngIf:[0,"ngIf"]},null),(n()(),e.zb(37,0,null,null,2,"div",[["class","dea-pagination"]],null,null,null,null,null)),(n()(),e.zb(38,0,null,null,1,"pagination-controls",[],null,[[null,"pageChange"]],(function(n,l,t){var e=!0;return"pageChange"===l&&(e=!1!==(n.component.p=t)&&e),e}),h.b,h.a)),e.yb(39,49152,null,0,d.c,[],null,{pageChange:"pageChange"}),(n()(),e.ob(0,[[1,2],["loading",2]],null,0,null,P))],(function(n,l){var t=l.component,u=n(l,12,0,1==t.isActivedAll);n(l,11,0,"px-4 btn btn-outline-primary dea-filterBtn mr-2",u);var i=n(l,17,0,1==t.isActivedCompleted);n(l,16,0,"px-4 btn btn-outline-primary dea-filterBtn mr-2",i);var s=n(l,22,0,1==t.isActivedPending);n(l,21,0,"px-4 btn btn-outline-primary dea-filterBtn",s),n(l,29,0,t.documentHeadersValue);var a=e.Tb(l,32,0,e.Lb(l,34).transform(t.documentBodies,n(l,33,0,10,t.p)));n(l,32,0,a),n(l,36,0,t.showMessage)}),(function(n,l){n(l,23,0,l.component.pending)}))}var N=e.vb("app-revision",a,(function(n){return e.Ub(0,[(n()(),e.zb(0,0,null,null,1,"app-revision",[],null,null,null,R,v)),e.yb(1,245760,null,0,a,[p.a,m.a,f.k,g.y],null,null)],(function(n,l){n(l,1,0)}),null)}),{},{},[]),U=t("s7LF"),z=t("xxOi");t.d(l,"RevisionModuleNgFactory",(function(){return O}));var O=e.wb(o,[],(function(n){return e.Ib([e.Jb(512,e.l,e.hb,[[8,[r.a,c.a,c.b,c.f,c.g,c.c,c.d,c.e,N]],[3,e.l],e.B]),e.Jb(4608,b.p,b.o,[e.x,[2,b.K]]),e.Jb(4608,U.z,U.z,[]),e.Jb(4608,U.e,U.e,[]),e.Jb(4608,g.y,g.y,[e.l,e.t,g.nb,g.z]),e.Jb(4608,d.e,d.e,[]),e.Jb(1073742336,b.b,b.b,[]),e.Jb(1073742336,f.o,f.o,[[2,f.t],[2,f.k]]),e.Jb(1073742336,U.y,U.y,[]),e.Jb(1073742336,U.j,U.j,[]),e.Jb(1073742336,U.v,U.v,[]),e.Jb(1073742336,g.d,g.d,[]),e.Jb(1073742336,g.g,g.g,[]),e.Jb(1073742336,g.h,g.h,[]),e.Jb(1073742336,g.l,g.l,[]),e.Jb(1073742336,g.m,g.m,[]),e.Jb(1073742336,g.t,g.t,[]),e.Jb(1073742336,g.u,g.u,[]),e.Jb(1073742336,g.A,g.A,[]),e.Jb(1073742336,g.C,g.C,[]),e.Jb(1073742336,g.G,g.G,[]),e.Jb(1073742336,g.J,g.J,[]),e.Jb(1073742336,g.M,g.M,[]),e.Jb(1073742336,g.P,g.P,[]),e.Jb(1073742336,g.S,g.S,[]),e.Jb(1073742336,g.X,g.X,[]),e.Jb(1073742336,g.ab,g.ab,[]),e.Jb(1073742336,g.bb,g.bb,[]),e.Jb(1073742336,g.cb,g.cb,[]),e.Jb(1073742336,g.B,g.B,[]),e.Jb(1073742336,z.a,z.a,[]),e.Jb(1073742336,d.a,d.a,[]),e.Jb(1073742336,o,o,[]),e.Jb(1024,f.i,(function(){return[[{path:"",component:a}]]}),[])])}))}}]);